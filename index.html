<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Save Alex's Contact</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .hidden { display: none; }
  </style>
</head>
<body>

<h1>Save Contact</h1>
<p id="message">Loading...</p>
<a id="saveLink" class="hidden" download="AlexPan.vcf">Save to Contacts</a>

<script>
  function getVCardData() {
    const params = new URLSearchParams(window.location.search);
    return params.get('vcard');
  }

  function init() {
    const vcardEncoded = getVCardData();
    const message = document.getElementById('message');
    const saveLink = document.getElementById('saveLink');

    if (!vcardEncoded) {
      message.textContent = "No contact info available. Please scan the NFC tag.";
      return;
    }

    const vcardDecoded = decodeURIComponent(vcardEncoded);

    const blob = new Blob([vcardDecoded], { type: 'text/vcard;charset=utf-8' });
    const url = URL.createObjectURL(blob);

    saveLink.href = url;
    saveLink.classList.remove('hidden');
    message.textContent = "Tap below to save the contact:";
  }

  window.onload = init;
</script>

</body>
</html>
